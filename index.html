<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Minas Desk</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>minas desk</h1>
  
  <div class="header-container">
  <p><b>welcome to my desk! click on the items to see more :)</b></p>
  </div>
  
  <!-- Clickable items -->
  <img class="headphones animate-in" src="headphones.png" onclick="openPopup(['images/how could.mp4', 'images/edelweis.mp4'], 'Music', 'Love singing and listening to music. You should see me in the car when I have aux.. A walking karaoke machine.')" />
  <img class="camera animate-in" src="camera.png" onclick="openPopup(
    ['images/cheese.jpeg', 'images/yum.jpeg', 'images/IMG_0376.jpeg', 'images/just the two of us.jpeg', 'images/running.mp4'], 
    'say cheese!', 
    `These are a few photos from my Canon G7X (even though the image is a Fujifilm lmao). I hope you enjoy looking through them as much as I enjoyed taking them! The last one is a short film in progress. Keep posted!
    <a href='https://c22co.github.io/Photography-Portfolio/' target='_blank'>Click here to see more</a>.`
  )" />

  <img class="shavings animate-in" src="shavings.png" onclick="openPopup(['images/cups.jpeg', 'images/pastels.jpeg', 'images/bones.jpeg', 'images/pot.jpeg'], 'shavings', 'These are some pieces I made during the school year in my life drawing class. All of these are traditional pieces but I also do digitial art as well!')" />
  <img class="pencil animate-in" src="pencil.png" onclick="openPopup(['images/cups.jpeg', 'images/pastels.jpeg', 'images/bones.jpeg', 'images/pot.jpeg'], 'shavings', 'These are some pieces I made during the school year in my life drawing class. All of these are traditional pieces but I also do digitial art as well!')" />
  <img class="laptop animate-in" src="Laptop.png" onclick="openPopup(['images/CAD.png', 'images/code.png', 'images/arduino.png'], 'Laptop', 'I’m currently working on a CAD project designing 3D-printed clickers, while also building websites for the Athena Award using HTML and CSS (you can find more about the Athena Award under the About Me section). In addition, I’ve recently started exploring hardware development through Arduino and Arduino IDE.')" />
  <img class="matcha animate-in" src="matcha.png" onclick="openPopup(['images/microfoam.jpeg', 'images/matcha process.mp4', 'images/mixed matcha.jpeg', 'images/matcha strawberry.jpeg', 'images/matcha1.jpeg', 'images/matcha2.mp4'], 'Matcha', 'love love love whisking whisking whisking microfoam microfoam microfoam, i need a good affordable matcha that is not effected by the shortage :( ')" />

    <!-- Single popup -->
    <div id="popup">
        <div class="popup-box" id="popupContent">
            <span class="close-btn" onclick="closePopup()">✖</span>
            
            <div class="carousel-container">
                <button class="carousel-btn" onclick="changeCarousel(-1)">‹</button>
                <div id="carouselMedia" class="carousel-media"></div>
                <button class="carousel-btn" onclick="changeCarousel(1)">›</button>
            </div>

            <h3 id="popupTitle">Title</h3>
            <p id="popupDesc">Description goes here...</p>
        </div>
    </div>

    <script>
        let currentCarouselMedia = [];
        let currentCarouselIndex = 0;

        function openPopup(mediaList, title, desc) {
            currentCarouselMedia = mediaList;
            currentCarouselIndex = 0;

            updateCarouselMedia();
            document.getElementById('popupTitle').textContent = title;
            document.getElementById('popupDesc').innerHTML = desc;
            document.getElementById('popup').style.display = 'flex';
        }

        // Allow clicking the background to close the popup
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('popup').addEventListener('click', function(e) {
                if (e.target === this) closePopup();
            });
        });

        function changeCarousel(direction) {
            currentCarouselIndex += direction;

            if (currentCarouselIndex < 0) {
            currentCarouselIndex = currentCarouselMedia.length - 1;
            } else if (currentCarouselIndex >= currentCarouselMedia.length) {
            currentCarouselIndex = 0;
            }

            updateCarouselMedia();
        }

        function updateCarouselMedia() {
            const mediaContainer = document.getElementById('carouselMedia');
            let current = currentCarouselMedia[currentCarouselIndex];

            // Remove previous fade class if any
            mediaContainer.classList.remove('fade');

            // Check if we already have a child and reuse it
            let element = mediaContainer.firstChild;

            // Determine if current media is video or image
            const isVideo = current.endsWith('.mp4') || current.endsWith('.webm') || current.endsWith('.ogg');

            if (!element || (isVideo && element.tagName !== 'VIDEO') || (!isVideo && element.tagName !== 'IMG')) {
                // Remove old element if type changed
                mediaContainer.innerHTML = '';
                if (isVideo) {
                    element = document.createElement('video');
                    element.controls = true;
                    element.className = 'carousel-video';
                } else {
                    element = document.createElement('img');
                    element.alt = 'Carousel Media';
                    element.className = 'carousel-image';
                }
                mediaContainer.appendChild(element);
            }

            // Fade out, change src, then fade in
            element.classList.remove('fade');
            setTimeout(() => {
                if (isVideo) {
                    element.src = current;
                } else {
                    element.src = current;
                }
                element.classList.add('fade');
            }, 10);
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
    </script>

</body>
</html>
